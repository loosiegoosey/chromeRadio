<html>
<head>
<script>

	function updateList()
	{
		var target = document.getElementById("links_found");
		var bgLinks = chrome.extension.getBackgroundPage().links;
		
		var currentPageLinks = bgLinks.length;
		//alert(currentPageLinks);
		
		var insert = "";
		for(i = 0; i < bgLinks.length; i++)
		{
			insert+="<a onClick=\"play(this.href);\" href=\""+bgLinks[i].href+"\">"+bgLinks[i].text+"</a><br>";
		}
		
		target.innerHTML = insert;
	}
	
	function play(href)
	{
		var playertarget = document.getElementById("player_area");
		playertarget.innerHTML = genPlayerLink(href);
	}
	
	function genPlayerLink(href)
	{
		return "<audio autoplay controls src=\""+href+"\"></audio>";
	}

</script>
</head>
<body onLoad="updateList()" style="width:300px;";>
    <p>MP3-Links found:</p>
	<p id="player_area"></p>
    <p id="links_found"></p>
  </body>
</html>